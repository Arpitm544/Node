pipeline
{
    agent any
        stages
        {
            stage("Install dependencies")
            {
                steps
                {
                    sh 'npm install'
                }
            
        }
 stage{
            steps{
                script{
                def output=sh('script:npm-jar target/server.js-SNAPSHOT-1.0' returnStdout:true).trim()
                println "code ${output} is running"
                }
            }
        }
      stage("Test")
      {
        steps{
                sh 'npm test || echo "No tests defined"'
        }
      }
      stage("Build")
      {
        steps{
                 sh 'npm run build' 
        }
      }

    }
}
